<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="t">
	<!-- 해당 영화 상영 지역 검색 -->
	<select id="selectcity" resultType="theater" parameterType="java.lang.String">
		select distinct city from theater where m_name=#{m_name} 
	</select>
	
	<!--해당 영화 상영 구검색  -->
	<select id="selectdistrict" resultType="theater" parameterType="java.util.Map">
		select distinct district from theater where m_name=#{m_name} and city=#{city}
	</select>
	
	<!-- 영화 상영 날짜 검색 -->
	<select id="selectdate" resultType="vo.DateVO" parameterType="java.util.Map">
		select to_char(max(date_s),'mm') max_month,to_char(max(date_s),'dd') max_date, to_char(min(date_s),'mm') min_month, to_char(min(date_s),'dd') min_date,(max(date_s)-min(date_s)) date_o, to_char(min(date_s),'day') day from theater 
		where m_name=#{m_name} and city=#{city} and district=#{district} 
	</select>
	
	<!-- 영화 상영 시간 검색  -->
	<select id="selectTime" resultType="theater" parameterType="java.util.Map">
		select time from theater where m_name=#{m_name} and city=#{city} and district=#{district} and date_s=#{date_s}
		<!-- select time from theater where m_name='위대한 쇼맨' and city='서울' and district='강남' and date_s='05282020'; -->
	</select>
</mapper>












